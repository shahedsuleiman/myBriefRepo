<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>login & Register</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <link rel="stylesheet" type="text/css" href="../css/loginAndRegister.css" />
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="../index.html" />
  </head>
  <body>
    <header>
      <nav>
        <a href="../index.html" class="name">
          <i class="fa-solid fa-book"></i>
          InklyReads
        </a>
        <div class="group">
          <ul class="navigation">
            <li><a href="../index.html">Home</a></li>
            <li><a href="/index.html">About</a></li>
            <li><a href="/html/contact.html">Contact</a></li>
            <li><a href="/index.html">catigories</a></li>
          </ul>
          <div class="search">
            <span class="icon">
              <i class="fa-solid fa-magnifying-glass searchBtn"></i>
              <i class="fa-solid fa-x fa-2xs closeBtn"></i>
            </span>
          </div>
        </div>
        <i class="fa-solid fa-bars menuToggle"></i>
        <a href="#" class="person"><i class="fa-regular fa-user"></i></a>
        <div class="searchBox">
          <input type="text" placeholder="Search here . . ." />
        </div>
      </nav>
    </header>
    <section id="background">
      <div class="form-box">
        <p class="welcome">Welcome to InklyReads!</p>
        <div class="button-box">
          <div id="divMove"></div>
          <button type="button" class="toggle-btn" onclick="loginToggle()">
            Log In
          </button>
          <button type="button" class="toggle-btn" onclick="registerToggle()">
            Register
          </button>
        </div>
        <form id="loginForm" class="input-group">
          <input
            type="email"
            class="input-field"
            id="emailLog"
            placeholder="User Email"
            required
          />
          <input
            type="password"
            class="input-field"
            id="passwordLogin"
            placeholder="Your Password"
            required
          />
          <button
            id="loginId"
            name="loginId"
            type="submit"
            class="submit-btn class-btn margin-top"
            onclick=""
          >
            Log in
          </button>
        </form>
        <!-- signup -->

        <form id="registerForm" class="input-group">
          <input
            type="text"
            placeholder="First Name"
            name="farstName"
            class="input-field"
            required
          />
          <input
            type="text"
            class="input-field"
            placeholder="Last Name"
            name="lastName"
            required
          />
          <input
            type="email"
            class="input-field"
            placeholder="Email"
            name="email"
            required
          />
          <input
            type="password"
            placeholder="Password"
            name="password"
            class="input-field"
            required
          />
          <input
            type="text"
            class="input-field"
            placeholder="Your Address"
            name="address"
            required
          />
          <input
            type="checkbox"
            class="check-box"
            name="agree"
            name="termsAccept"
          />
          <span onclick="showTerm()" class="classTermAndConditions"
            >I agree to the terms & conditions.</span
          >
          <button type="click" class="submit-btn class-btn">Register</button>
        </form>
      </div>
    </section>
    <section id="termAndConditions">
      <div class="terms-box">
        <div class="terms-text">
          <h2>Terms of Service</h2>
          <p>Last Edit: 10/14/2023</p>
          <p>
            These terms and conditions outline the rules and regulations for the
            use of Inklyreads.
          </p>
          <p>
            These terms and conditions outline the rules and regulations for the
            use of Inklyreads.
          </p>
          <p>
            The following terminology applies to these Terms and Conditions,
            Privacy Statement, and Disclaimer Notice and any or all Agreements:
            "user," the person accessing this website and accepting the
            Company's terms and conditions.
          </p>
          <p>
            The following terminology applies to these Terms and Conditions,
            Privacy Statement, and Disclaimer Notice and any or all Agreements:
            "user," the person accessing this website and accepting the
            Company's terms and conditions.
          </p>
          <p>1. Acceptance of Terms</p>
          <p>
            1.1. By accessing or using Inklyreads, you agree to be bound by
            these Terms and Conditions.
          </p>
          <p>2. Changes to Terms</p>
          <p>
            2.1. Inklyreads reserves the right to revise these terms and
            conditions at any time without notice.
          </p>
          <p>3. Privacy Policy</p>
          <p>
            3.1. Inklyreads respects your privacy. Our Privacy Policy explains
            how we collect, use, and protect your personal information.
          </p>
          <p>4. Use of the Website</p>
          <p>
            4.1. You agree not to use Inklyreads for any unlawful purpose or in
            any way that could harm the website or its users.
          </p>
          <p>
            4.2. You must not use Inklyreads in any way that causes, or may
            cause, damage to the website or impairment of the availability or
            accessibility of the website.
          </p>
          <p>5. Intellectual Property</p>
          <p>
            5.1. [Your Company] owns all intellectual property rights for all
            content on Inklyreads. You may not reproduce, duplicate, or copy any
            material from the website.
          </p>
          <p>6. Book Listings</p>
          <p>
            6.1. Inklyreads strives for accuracy in book listings, but we do not
            guarantee the accuracy or completeness of the information provided
            on our website.
          </p>
          <p>7. External Links</p>
          <p>
            7.1. Inklyreads may contain links to other websites. Inklyreads is
            not responsible for the content or privacy practices of these
            external sites.
          </p>
          <p>8. Limitation of Liability</p>
          <p>
            8.1. Inklyreads will not be liable to you (whether under the law of
            contract, the law of torts, or otherwise) in relation to the
            contents of, or use of, or otherwise in connection with, Inklyreads:
          </p>
          <p>
            for any direct loss; for any indirect, special, or consequential
            loss; or for any business losses, loss of revenue, income, profits,
            or anticipated savings, loss of contracts, loss of reputation or
            goodwill, or loss or corruption of information or data.
          </p>
          <p>9. Governing Law</p>
          <p>
            9.1. These terms and conditions are governed by and construed in
            accordance with the laws of jordan and you irrevocably submit to the
            exclusive jurisdiction.
          </p>
          <p>10. Contact Information</p>
          <p>
            10.1. If you have any questions or concerns regarding these terms
            and conditions, please contact us.
          </p>
          <p>
            By using Inklyreads, you signify your acceptance of these terms and
            conditions. If you do not agree to these terms, please do not use
            our website.
          </p>
          <h4>i Agree to the Terms of Service and I reed Privacy Notice.</h4>
          <button type="button" class="submit-btn class-btn-term close">
            Close
          </button>
        </div>
      </div>
    </section>
    <script type="module">
      // initialize App and methods me used start
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
      import {
        getDatabase,
        set,
        ref,
        child,
        get,
      } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js";
      import {
        getAuth,
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
      } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-auth.js";
      // initialize App and methods me used end

      const firebaseConfig = {
        apiKey: "AIzaSyD0q1Gw6cNmcLBE3y4jeY5KpswMMQ-ls00",
        authDomain: "inklyreads-2529f.firebaseapp.com",
        databaseURL: "https://inklyreads-2529f-default-rtdb.firebaseio.com/",
        projectId: "inklyreads-2529f",
        storageBucket: "inklyreads-2529f.appspot.com",
        messagingSenderId: "781978896762",
        appId: "1:781978896762:web:5ddba45622e4fd52abeec3",
      };

      // Initialize Firebase start
      const app = initializeApp(firebaseConfig);
      const db = getDatabase();
      const auth = getAuth(app);
      const dbref = ref(db);
      // Initialize Firebase end

      // Register User start
      let RegisterUser = (event) => {
        event.preventDefault();

        // giv me all values for registerForm start
        let firstName =
          document.getElementById("registerForm").elements[0].value;
        let lastName =
          document.getElementById("registerForm").elements[1].value;
        let email = document.getElementById("registerForm").elements[2].value;
        let password =
          document.getElementById("registerForm").elements[3].value;
        let address = document.getElementById("registerForm").elements[4].value;
        let agree = document.getElementById("registerForm").elements[5].value;
        // giv me all values for registerForm end

        createUserWithEmailAndPassword(auth, email, password)
          .then((credentials) => {
            set(ref(db, "UsersAuthList/" + credentials.user.uid), {
              firstName: firstName,
              lastName: lastName,
              email: email,
              password: password,
              address: address,
              agree: agree,
            });
            loginToggle();
            function getInformation() {
              let registerForm = document.getElementById("registerForm");
              registerForm.addEventListener("submit", (e) => {
                e.preventDefault();
                let firstName =
                  document.getElementById("registerForm").elements[0].value;
                let lastName =
                  document.getElementById("registerForm").elements[1].value;
                let email =
                  document.getElementById("registerForm").elements[2].value;
                let password =
                  document.getElementById("registerForm").elements[3].value;
                let address =
                  document.getElementById("registerForm").elements[4].value;
                let agree =
                  document.getElementById("registerForm").elements[5].value;
                fetch("http://localhost:3000/users", {
                  method: "POST",
                  headers: {
                    "Content-type": "application/json",
                  },
                  body: JSON.stringify({
                    firstName: firstName,
                    lastName: lastName,
                    userName: `${firstName} ${lastName}`,
                    email: email,
                    password: password,
                    address: address,
                    agree: agree,
                  }),
                });
              });
            }
            getInformation();
          })
          .catch((error) => {
            console.log(error.code);
            console.log(error.message);
          });
      };
      registerForm.addEventListener("submit", RegisterUser);
      // Register User end

      // Sign In User start
      let SignInUser = (event) => {
        event.preventDefault();
        let email = document.getElementById("loginForm").elements[0].value;
        let password = document.getElementById("loginForm").elements[1].value;
        signInWithEmailAndPassword(auth, email, password)
          .then((credentials) => {
            get(child(dbref, "UsersAuthList/" + credentials.user.uid)).then(
              (snapshot) => {
                if (snapshot.exists()) {
                  sessionStorage.setItem(
                    "user-info",
                    JSON.stringify({
                      firstName: snapshot.val().firstName,
                      lastName: snapshot.val().lastName,
                    })
                  );
                  sessionStorage.setItem(
                    "user-credentials",
                    JSON.stringify(credentials.user)
                  );
                  window.location.href = "../index.html";
                }
              }
            );
          })
          .catch((error) => {
            alert(error.message);
            console.log(error.code);
            console.log(error.message);
          });
      };
      loginForm.addEventListener("submit", SignInUser);
      // Sign In User end
    </script>
    <script src="../js/loginRegister.js"></script>
  </body>
</html>